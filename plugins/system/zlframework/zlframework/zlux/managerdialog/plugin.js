/**
 * @package     ZOOlanders
 * @version     3.3.27
 * @author      ZOOlanders - http://zoolanders.com
 * @license     GNU General Public License v2 or later
 */

!function(o,i,a,n){"use strict";var l=function(i){this.options=o.extend({},this.options,i),this.events={}};o.extend(l.prototype,o.zlux.Main.prototype,{name:"dialog",options:{width:"300",height:"150",title:"Dialog",scrollbar:!0},initDialog:function(){var a=this;a.options.dialogClass="zlux-dialog "+a.options.dialogClass,a.main=o("<div />").appendTo(o("body")).dialog(o.extend({autoOpen:1,resizable:!1,height:"auto"},a.options)),a.main.hide(),a.content=o('<div class="zlux-dialog-content" />').appendTo(a.main),a.widget=a.main.dialog("widget"),a.main.on("dialogopen",function(){a.widget.data("dialog-dragged")||a.widget.position(o.extend({my:"center",at:"center",of:i},a.options.position))}),a.main.on("dialogdragstart",function(){a.widget.data("dialog-dragged",1)}),a._spinner=o('<i class="zlux-loader-circle-big icon-spinner icon-spin" />').appendTo(a.widget),a._spinner_area=a.main;var n=o.Deferred().resolve();a.options.scrollbar&&(n=o.zlux.assets.load(o.zlux.url.zlfw("assets/js/jquery.plugins/nanoscroller/nanoscroller.min.js"),function(){a.main.addClass("zlux-scroller").nanoScroller({preventPageScrolling:!0,contentClass:"zlux-dialog-content"})})),o(".ui-dialog-titlebar-close",a.widget).html('<i class="icon-remove" />'),n.done(function(){a.inited=!0,a.trigger("InitComplete")})},initContent:function(){var o=this;o.main.show(),o.widget.attr("data-zlux-status","ready"),o.options.scrollbar&&o.scrollbar("refresh"),o.contentinited=!0,o.spinner("hide")},toggle:function(){var o=this;o.inited?o.dialog(o.dialog("isOpen")?"close":"open"):o.initDialog()},dialog:function(o){return this.main.dialog(o)},scrollbar:function(i){var a=this;if("refresh"===i){var n=o(".pane .slider",a.main);a.scrollbar("show"),a.main.nanoScroller();var l=Math.round(a.main.height())-Math.round(n.height());l>=0&&l<=5&&a.scrollbar("hide")}else"hide"===i?a.main.nanoScroller({stop:!0}):"show"===i?a.main.nanoScroller({stop:!1}):a.main.nanoScroller(i)},spinner:function(o){var i=this;if(i.contentinited)if("show"===o)i.main.fadeTo(0,.5),i._spinner.show(),i.options.scrollbar&&i.scrollbar("hide"),i.spinning=!0;else{i.options.scrollbar&&i.scrollbar("show"),i._spinner.hide();var a=i.main;i.toolbar&&(a=a.add(i.toolbar.wrapper)),a.fadeTo("slow",1),i.spinning=!1}},newToolbar:function(i,a,n){var l=this;l.toolbar||(l.toolbar={},l.toolbar.wrapper=o('<div class="zlux-dialog-toolbar" />').hide().insertAfter(l.widget.children()[0]));var t=o('<div class="zlux-dialog-toolbar-'+a+'"><ul class="inline" /></div>').appendTo(l.toolbar.wrapper);o.each(i,function(i,a){o("ul",t).append(o("<li />").append(o('<i data-id="'+a.id+'" class="icon-'+a.icon+' icon-2x icon-border" title="'+a.title+'">'+(a.subicon?'<i class="icon-'+a.subicon+'"></i>':"")+"</i>").on("click",function(){if(o(this).hasClass("disabled"))return!1;a.click(o(this))})))}),o(".zlux-dialog-toolbar-backtomain",l.toolbar.wrapper).on("click",function(){n()})},newSubToolbar:function(i,a){var n=this;o('<div class="zlux-dialog-subtoolbar-'+i+'" />').hide().appendTo(o(".zlux-dialog-toolbar-"+a,n.toolbar.wrapper))},setMainToolbar:function(i){var a=this;a.newToolbar(i,"main"),a.toolbar.wrapper.prepend(o('<i class="zlux-dialog-toolbar-backtomain icon-reply icon-border" title="Back to Main view" />').on("click",function(){o('[class^="zlux-dialog-toolbar-"]',a.toolbar.wrapper).hide(),o(".zlux-dialog-toolbar-main",a.toolbar.wrapper).show()}))},showToolbar:function(i){var a=this;o(".zlux-dialog-toolbar-"+i,a.toolbar.wrapper).show(),o(".zlux-dialog-toolbar-main",a.toolbar.wrapper).hide(),o(".zlux-dialog-toolbar-backtomain",a.toolbar.wrapper).show()},toggleSubtoolbar:function(i,a){a=o(".zlux-dialog-toolbar-"+a,this.toolbar.wrapper);var n=o(".zlux-dialog-subtoolbar-"+i,a);n.siblings("div").slideUp("fast",function(){n.slideToggle("fast")})},toolbarBtnState:function(i,a,n){var l=this,t=o(".zlux-dialog-toolbar-"+i+' i[data-id="'+a+'"]',l.toolbar.wrapper);"disabled"===n?t.animate({color:"#C0C0C0"},200,function(){t.addClass("disabled")}):t.animate({color:"#444"},200,function(){t.removeClass("disabled")})}}),o.zlux[l.prototype.name]=function(){var o=arguments;return new l(o[0]?o[0]:{})}}(jQuery,window,document);